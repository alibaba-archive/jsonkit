/**
 * jsonkit: v0.2.2
 * https://github.com/teambition/jsonkit
 */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=b():"function"==typeof define&&define.amd?define([],b):a.JSONKit=b()}(this,function(){"use strict";function a(a){return"[object Object]"===q.call(a)}function b(a){if(!a)return!0;for(var b in a)return!r.call(a,b);return!0}function c(a,b,c,d,e){var f,g,h;if(a)if(null==d&&(d=s(a)),d){if(e){for(f=a.length-1;f>=0;f--)if(b.call(c,a[f],f,a)===n)return}else for(f=0,g=a.length;g>f;f++)if(b.call(c,a[f],f,a)===n)return}else for(h in a)if(r.call(a,h)&&b.call(c,a[h],h,a)===n)return}function d(b){var c=typeof b;return b&&"object"===c?s(b)?o:a(b)?p:b.toString():"function"===c?b.toString():b}function e(a){var b=arguments[1],c=d(a);if(c!==o&&c!==p)throw new Error("Not a array or object.");1===arguments.length&&(b=a,a=c===o?[]:{}),f(a,b,c,m);for(var e=2,g=arguments.length;g>e;e++)f(a,arguments[e],c,m);return a}function f(a,b,e,g){if(--g<=0)throw new Error("Maximum structure depth exceeded.");return a===b||e!==d(b)?a:(c(b,function(b,c){var e=d(b);e===o||e===p?(e!==d(a[c])&&(a[c]=e===o?[]:{}),f(a[c],b,e,g)):a[c]=e},null,e===o),a)}function g(a){var b=d(a);if(b!==o&&b!==p)throw new Error("Not a array or object.");if(arguments.length<2)throw new Error("Must have 2 arguments or more.");for(var c=1,e=arguments.length;e>c;c++){if(b!==d(arguments[c]))throw new Error("Arguments's type must be consistent.");h(a,arguments[c],b,m)}return a}function h(a,f,g,i){if(--i<=0)throw new Error("Maximum structure depth exceeded.");if(a===f)return a;if(b(a))return e(a,f);if(g===o&&1===a.length){if(null===a[0])return e(a,f);var j=a[0],k=d(j),l=typeof j;a.length=0,c(f,function(b){if(l===typeof b){var c=d(b);return c!==o&&c!==p?a.push(c):void(c===k&&a.push(h(e(j),b,c,i)))}},null,!0)}else c(a,function(b,c){if(!r.call(f,c)||null!==b&&typeof b!=typeof f[c])return void(g===o?a[c]=null:delete a[c]);var j=d(f[c]);return j!==o&&j!==p?void(a[c]=j):null===b?void(a[c]=e(f[c])):j!==d(b)?void(g===o?a[c]=null:delete a[c]):void h(b,f[c],j,i)},null,g===o);return a}function i(a,b,c){if(a===b)return!0;var e=d(a);return e!==d(b)?!1:e===o||e===p?j(a,b,e,c>0?c:m):!0}function j(a,b,d,e){if(--e<=0)throw new Error("Maximum structure depth exceeded.");var f=!0;return d===o&&a.length!==b.length?!1:d===p&&a.prototype!==b.prototype?!1:(c(a,function(a,c){return r.call(b,c)?void 0:(f=!1,n)},null,!1),f&&c(b,function(b,c){return i(b,a[c],e)?void 0:(f=!1,n)},null,!1),f)}function k(a,b,d){var e,f=0;return e="function"==typeof b?b:function(a){return b===a},d||s(a)?c(a,function(b,c){e(b,c)&&(a.splice(c,1),f+=1)},null,!0,!0):c(a,function(b,c){e(b,c)&&(delete a[c],f+=1)}),f}function l(a){var b={};return s(a)?(c(a,function(c,d){var e=typeof c+c;b[e]?a[d]=n:b[e]=!0},null,!0),k(a,n,!0),a):a}var m=20,n={},o=[],p={},q=Object.prototype.toString,r=Object.prototype.hasOwnProperty,s=Array.isArray||function(a){return"[object Array]"===q.call(a)};return{NAME:"JSONKit",VERSION:"0.2.1",each:c,union:e,isEmpty:b,isEqual:i,isArray:s,isObject:a,intersect:g,removeItem:k,uniqueArray:l,setMaxDepth:function(a){return m=a>=5&&1e3>=a?+a:20}}});